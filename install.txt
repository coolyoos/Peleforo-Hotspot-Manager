# üöÄ Guide de d√©ploiement Peleforo avec WAMP

## √âtape 1 : Installation de WAMP

### T√©l√©charger WAMP

1. Allez sur **https://www.wampserver.com/en/**
2. T√©l√©chargez la version 64 bits (ou 32 bits selon votre Windows)
3. Ex√©cutez l'installateur `wampserver3.x.x_x64.exe`

### Installation

1. **Acceptez** la licence
2. **Choisissez** le dossier d'installation (par d√©faut : `C:\wamp64\`)
3. **S√©lectionnez** votre navigateur par d√©faut
4. **S√©lectionnez** votre √©diteur de texte (Notepad++ recommand√©)
5. Cliquez sur **Install**
6. **Attendez** la fin de l'installation

### D√©marrer WAMP

1. **Lancez** WampServer depuis le menu D√©marrer
2. Une **ic√¥ne verte** appara√Æt dans la barre des t√¢ches (si rouge/orange, voir d√©pannage)
3. Le serveur est pr√™t ! üéâ

---

## √âtape 2 : D√©ployer Peleforo

### M√©thode 1 : Copier les fichiers manuellement

1. **Ouvrez** l'explorateur Windows
2. **Naviguez** vers `C:\wamp64\www\`
3. **Cr√©ez** un nouveau dossier `peleforo`
4. **Copiez tous les fichiers** de Peleforo dans ce dossier :
   ```
   C:\wamp64\www\peleforo\
   ‚îú‚îÄ‚îÄ index.php
   ‚îú‚îÄ‚îÄ dashboard.php
   ‚îú‚îÄ‚îÄ vouchers.php
   ‚îú‚îÄ‚îÄ customize.php
   ‚îú‚îÄ‚îÄ print.php
   ‚îú‚îÄ‚îÄ settings.php
   ‚îú‚îÄ‚îÄ history.php
   ‚îú‚îÄ‚îÄ routeros_api.php
   ‚îî‚îÄ‚îÄ README.md
   ```

### M√©thode 2 : Glisser-d√©poser

1. **Clic droit** sur l'ic√¥ne WAMP (barre des t√¢ches)
2. Cliquez sur **"www directory"**
3. **Glissez** le dossier `peleforo` dans la fen√™tre qui s'ouvre

---

## √âtape 3 : V√©rifier PHP et Apache

### V√©rifier que tout fonctionne

1. **Clic droit** sur l'ic√¥ne WAMP
2. Cliquez sur **"Localhost"**
3. Vous devriez voir la page d'accueil WAMP
4. Cliquez sur **"Vos Projets"** ou **"Your Projects"**
5. Vous devriez voir **peleforo** dans la liste

### Activer l'extension PHP sockets

1. **Clic droit** sur l'ic√¥ne WAMP
2. **PHP** ‚Üí **Extensions PHP**
3. **Cochez** `php_sockets` (s'il n'est pas coch√©)
4. **Red√©marrez** les services (Clic droit ‚Üí Restart All Services)

---

## √âtape 4 : Acc√©der √† Peleforo

### Ouvrir l'application

1. **Ouvrez votre navigateur** (Chrome, Firefox, Edge)
2. **Tapez dans la barre d'adresse** :
   ```
   http://localhost/peleforo/
   ```
3. La page de configuration devrait s'afficher ! üéâ

### Configuration initiale

Remplissez le formulaire avec vos informations Mikrotik :

- **IP Mikrotik** : `192.168.88.1` (ou votre IP Mikrotik)
- **Port API** : `8728`
- **Nom d'utilisateur** : `admin`
- **Mot de passe** : votre mot de passe admin Mikrotik
- **Nom Hotspot** : `hotspot1` (ou le nom de votre serveur hotspot)

Cliquez sur **"Connecter et continuer"**

---

## √âtape 5 : Permissions des fichiers

### Donner les droits d'√©criture (Windows)

1. **Clic droit** sur le dossier `C:\wamp64\www\peleforo\`
2. **Propri√©t√©s** ‚Üí **S√©curit√©**
3. **Modifier** ‚Üí S√©lectionnez **"Utilisateurs"**
4. **Cochez** "Contr√¥le total" ou au minimum "√âcriture"
5. **Appliquer** ‚Üí **OK**

Cela permet √† Peleforo de cr√©er les fichiers de configuration.

---

## üîß Configuration avanc√©e

### Cr√©er un Virtual Host (optionnel)

Pour acc√©der via `http://peleforo.local` au lieu de `http://localhost/peleforo/`

#### 1. √âditer le fichier hosts

1. Ouvrez le **Bloc-notes en tant qu'administrateur**
2. **Fichier** ‚Üí **Ouvrir** : `C:\Windows\System32\drivers\etc\hosts`
3. Ajoutez √† la fin :
   ```
   127.0.0.1    peleforo.local
   ```
4. **Sauvegardez**

#### 2. Cr√©er le Virtual Host dans WAMP

1. **Clic droit** sur l'ic√¥ne WAMP
2. **Apache** ‚Üí **httpd-vhosts.conf**
3. Ajoutez √† la fin du fichier :
   ```apache
   <VirtualHost *:80>
       ServerName peleforo.local
       DocumentRoot "C:/wamp64/www/peleforo"
       <Directory "C:/wamp64/www/peleforo">
           Options Indexes FollowSymLinks
           AllowOverride All
           Require all granted
       </Directory>
   </VirtualHost>
   ```
4. **Sauvegardez**
5. **Red√©marrez** les services WAMP

Maintenant acc√©dez via : `http://peleforo.local`

---

## ‚ùì D√©pannage WAMP

### L'ic√¥ne WAMP est orange ou rouge

**Causes possibles :**

#### Port 80 occup√© (le plus fr√©quent)

**Skype ou autre application utilise le port 80**

1. **Clic droit** sur l'ic√¥ne WAMP
2. **Outils** ‚Üí **Test Port 80**
3. Si occup√©, changez le port Apache :
   - **Apache** ‚Üí **httpd.conf**
   - Cherchez `Listen 80`
   - Remplacez par `Listen 8080`
   - Sauvegardez et red√©marrez
   - Acc√©dez via : `http://localhost:8080/peleforo/`

**IIS (Internet Information Services) actif**

1. **Panneau de configuration** ‚Üí **Programmes**
2. **Activer ou d√©sactiver des fonctionnalit√©s Windows**
3. **D√©cochez** "Internet Information Services"
4. **Red√©marrez** Windows

#### Port 3306 occup√© (MySQL)

1. **Services Windows** (Win + R ‚Üí `services.msc`)
2. Trouvez **MySQL** (si install√© s√©par√©ment)
3. **Arr√™tez** le service
4. **Red√©marrez** WAMP

### Extension sockets non disponible

1. **Clic droit** sur l'ic√¥ne WAMP
2. **PHP** ‚Üí **Version** ‚Üí V√©rifiez que vous utilisez **PHP 7.4+**
3. Si besoin, changez la version PHP
4. **PHP** ‚Üí **Extensions PHP** ‚Üí Cochez `php_sockets`

### Erreur "Forbidden" ou "403"

1. **V√©rifiez** que les fichiers sont bien dans `C:\wamp64\www\peleforo\`
2. **Permissions** : suivez l'√âtape 5 ci-dessus
3. **Red√©marrez** WAMP

### Page blanche

1. **Activez l'affichage des erreurs** :
   - Cr√©ez un fichier `test.php` dans peleforo :
   ```php
   <?php
   error_reporting(E_ALL);
   ini_set('display_errors', 1);
   phpinfo();
   ?>
   ```
2. Acc√©dez √† `http://localhost/peleforo/test.php`
3. V√©rifiez les erreurs affich√©es

---

## üì± Acc√®s depuis un autre appareil (m√™me r√©seau)

### Configuration

1. **Trouvez votre IP locale** :
   - Ouvrez **CMD** (Win + R ‚Üí `cmd`)
   - Tapez `ipconfig`
   - Notez l'**Adresse IPv4** (ex: `192.168.1.50`)

2. **Configurez le pare-feu** :
   - **Panneau de configuration** ‚Üí **Pare-feu Windows**
   - **Param√®tres avanc√©s** ‚Üí **R√®gles de trafic entrant**
   - **Nouvelle r√®gle** ‚Üí **Port** ‚Üí **TCP 80**
   - **Autoriser la connexion**

3. **Depuis un autre PC/t√©l√©phone** (m√™me WiFi) :
   ```
   http://192.168.1.50/peleforo/
   ```

---

## üéØ Checklist de d√©ploiement

- [ ] WAMP install√© et ic√¥ne **verte**
- [ ] Dossier peleforo dans `C:\wamp64\www\`
- [ ] Extension `php_sockets` activ√©e
- [ ] Permissions d'√©criture sur le dossier
- [ ] Acc√®s √† `http://localhost/peleforo/` fonctionne
- [ ] API Mikrotik activ√©e (port 8728)
- [ ] Configuration initiale compl√©t√©e
- [ ] Test de g√©n√©ration de vouchers OK

---

## üîê S√©curit√© (recommand√©)

### Prot√©ger l'acc√®s avec un mot de passe

1. Cr√©ez un fichier `.htaccess` dans `C:\wamp64\www\peleforo\` :
   ```apache
   AuthType Basic
   AuthName "Peleforo Admin"
   AuthUserFile C:/wamp64/www/peleforo/.htpasswd
   Require valid-user
   ```

2. G√©n√©rez le fichier `.htpasswd` :
   - Utilisez : https://hostingcanada.org/htpasswd-generator/
   - Copiez le contenu dans `C:\wamp64\www\peleforo\.htpasswd`

3. Red√©marrez WAMP

---

## üìû Besoin d'aide ?

### Commandes utiles

**Red√©marrer tous les services :**
- Clic droit WAMP ‚Üí **Restart All Services**

**Voir les logs d'erreur :**
- Clic droit WAMP ‚Üí **Apache** ‚Üí **Apache error log**
- Clic droit WAMP ‚Üí **PHP** ‚Üí **PHP error log**

**Tester PHP :**
```
http://localhost/?phpinfo=1
```

### Probl√®mes courants r√©solus

| Probl√®me | Solution |
|----------|----------|
| Ic√¥ne orange | Port 80 occup√© ‚Üí changez le port |
| Fichiers non accessibles | V√©rifiez les permissions |
| API ne se connecte pas | V√©rifiez l'IP et que l'API Mikrotik est active |
| Page blanche | Activez display_errors pour voir l'erreur |

---

## ‚úÖ Pr√™t √† utiliser !

Votre Peleforo Hotspot Manager est maintenant d√©ploy√© avec WAMP ! üéâ

**Prochaines √©tapes :**
1. G√©n√©rez vos premiers vouchers
2. Personnalisez votre portail captif
3. Uploadez la page splash sur Mikrotik
4. Imprimez vos tickets

**Bon d√©marrage ! üöÄ**